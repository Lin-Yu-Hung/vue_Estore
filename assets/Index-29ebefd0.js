import{_ as N,r as L,o as d,c as u,g as S,h as o,i as r,n as B,j as M,T as F,k as f,a as V,u as O,m as P,l as z,q as R,t as T,x as I,b as t,y as E,F as w,z as p,A as C,B as m,p as J,f as j}from"./index-f45ec150.js";import{M as q}from"./MenuList-91a4c213.js";import{t as G}from"./util-ced33d90.js";import{F as U}from"./Footer-cbb07641.js";import{a as W}from"./api-422668ba.js";import{e as H}from"./sweetAlert-6fd564e2.js";import{c as K}from"./cart-1b72d0e8.js";import{h as Q}from"./bootstrap-28393965.js";import{_ as D}from"./e-store-logo-4781a984.js";const X={props:{alignLeft:{type:Boolean,default:!1}},setup(l){const s=l.alignLeft,i=L(!1);return{menuVisible:i,showMenu:()=>{i.value=!0},hideMenu:()=>{i.value=!1},alignLeft:s}}};function Y(l,s,i,e,v,x){return d(),u("div",{class:"menu py-2 py-md-4",onMouseenter:s[0]||(s[0]=(...n)=>e.showMenu&&e.showMenu(...n)),onTouchend:s[1]||(s[1]=(...n)=>e.hideMenu&&e.hideMenu(...n)),onMouseleave:s[2]||(s[2]=(...n)=>e.hideMenu&&e.hideMenu(...n))},[S(l.$slots,"header",{},void 0,!0),o(F,{name:"custom-classes","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"},{default:r(()=>[e.menuVisible?(d(),u("div",{key:0,class:B(["dropdown shadow card",[e.alignLeft?"start-0":"end-0"]])},[S(l.$slots,"menu",{},void 0,!0)],2)):M("",!0)]),_:3})],32)}const Z=N(X,[["render",Y],["__scopeId","data-v-514172b0"]]);const $={props:{show:{type:Boolean,default:!1},collapseId:{type:String}},setup(l){const s=L(l.show?"fa-chevron-up":"fa-chevron-down");let i=!0;return{iconName:s,toggleIcon:()=>{i&&(i=!1,s.value=s.value==="fa-chevron-up"?"fa-chevron-down":"fa-chevron-up",setTimeout(()=>{i=!0},350))},props:l}}};function tt(l,s,i,e,v,x){const n=f("font-awesome-icon");return d(),u("div",{class:"d-flex",onClick:s[0]||(s[0]=(...c)=>e.toggleIcon&&e.toggleIcon(...c))},[S(l.$slots,"title"),o(n,{"data-bs-toggle":"collapse","data-bs-target":`#${i.collapseId}`,"aria-expanded":"true","aria-controls":`${i.collapseId}`,class:"text-secondary m-0",icon:e.iconName,role:"button"},null,8,["data-bs-target","aria-controls","icon"])])}const et=N($,[["render",tt]]);const ot={components:{DropDownMenu:Z,MenuList:q,Footer:U,ToggleArrowIcon:et},setup(l){const s=V(),i=O();P(()=>s.path,_=>{Q("offcanvasNavbar")}),z();const e=K(),{cartItems:v,cartAmount:x,cartItemCount:n}=R(e),c=L([]),b=L(9);window.addEventListener("resize",_=>{window.innerWidth>992?b.value=9:b.value=6});const k=T(()=>c.value.reduce((_,a)=>(_[a.id]=a,_),{})),h=T(()=>{const _={};return c.value.reduce((a,y)=>(_[y.category]||(_[y.category]=!0,a.push(y.category)),a),[])});return(async()=>{try{const _=await W();console.log(_),c.value=JSON.parse(JSON.stringify(_.data.products))}catch{H("取得資料錯誤","請重新整理網頁或聯絡客服人員")}})(),I("productList",c),I("productListMap",k),I("pageItemCount",b),I("productCategoryList",h),{productList:c,toggleStatus:G,cartItems:v,cartAmount:x,cartItemCount:n,cart:e,route:s,router:i,productCategoryList:h}}},g=l=>(J("data-v-283b40ae"),l=l(),j(),l),st={class:"main-nav container rounded-pill bg-primary py-0 shadow"},at={class:"container-fluid"},nt={class:"row align-items-center"},rt={class:"col col-lg-2 d-flex align-items-center"},ct={class:"offcanvas offcanvas-start text-bg-dark",tabindex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel"},lt=g(()=>t("div",{class:"offcanvas-header"},[t("img",{class:"logo",src:D,alt:"logo"}),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),it={class:"offcanvas-body"},dt={class:"menuList"},ut={class:"dropdown-list"},_t={class:"pe-none"},pt={class:"collapse multi-collapse",id:"productList"},mt={class:"mt-3 ps-4"},ft={parentId:"productList"},ht={parentId:"productList"},gt={parentId:"productList"},vt=g(()=>t("span",{class:"pe-none"},"商品分類 ",-1)),bt={class:"collapse multi-collapse",id:"productCategory"},yt={class:"mt-3 ps-3"},wt=g(()=>t("img",{class:"logo",src:D,alt:"logo"},null,-1)),xt={class:"col-4 lg-down-hide"},It={class:"nav"},Lt=g(()=>t("span",{class:"menu-link"},"商品列表",-1)),kt={class:"product-menu p-4"},Ct={class:"d-column flex-grow-1"},St={class:"fs-6 text-secondary pb-2 mb-2 text-underline-hover"},Mt={class:"fs-6 text-secondary pb-2 mb-2 text-underline-hover"},Nt={class:"accordion",id:"category",style:{width:"max-content"}},At={class:"accordion-item border-0"},Tt=g(()=>t("h2",{class:"accordion-header fs-6 pb-2 pe-2","data-bs-toggle":"collapse","data-bs-target":"#productCategory","aria-expanded":"true","aria-controls":"category",style:{"user-select":"none"}}," 商品分類 ",-1)),Dt={id:"productCategory",class:"accordion-collapse collapse p-0 show","data-bs-parent":"#category"},Bt={class:"accordion-body p-0 border-top"},Ft={class:"container-fluid mt-2"},Vt={class:"row row-cols-2"},Ot={class:"text-underline-hover"},Pt={class:"col mobile-hide"},zt={class:"input-group d-center align-items-center rounded-pill border bg-white"},Rt=g(()=>t("input",{type:"text",class:"form-control rounded-pill border-0 ps-3",placeholder:"輸入商品關鍵字"},null,-1)),Et={class:"col col-md-3 d-end align-items-center pe-md-5"},Jt={class:"profile py-2"},jt={class:"position-relative pe-2"},qt={key:0,class:"position-absolute start-100 translate-middle badge rounded-pill bg-danger"},Gt={class:"cartList pb-0"},Ut={class:"d-flex align-items-center"},Wt=["src","alt"],Ht={class:"card-body d-column p-0 pb-2"},Kt={class:"d-between mb-2"},Qt={class:"card-title fs-small fs-lg-base mb-0"},Xt={class:"description text-secondary fs-small mb-2"},Yt={class:"text-end mb-0"},Zt={class:"d-column align-items-end p-2"},$t={class:"mb-2"},te={class:"fs-5"},ee={key:1,class:"m-4 text-nowrap mb-0 pb-4 fs-5"},oe={key:0,class:"main-bg"},se={class:"container content"};function ae(l,s,i,e,v,x){const n=f("font-awesome-icon"),c=f("router-link"),b=f("MenuList"),k=f("ToggleArrowIcon"),h=f("DropDownMenu"),A=f("router-view"),_=f("Footer");return d(),u(w,null,[t("div",st,[t("div",at,[t("div",nt,[t("div",rt,[o(n,{class:"fs-5 text-white me-3 lg-up-hide",icon:"fa-bars",role:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar","aria-label":"Toggle navigation"}),t("div",ct,[lt,t("div",it,[o(b,null,{menu:r(()=>[t("ul",dt,[t("li",null,[o(c,{class:"menu-link",to:"/eStore/home"},{default:r(()=>[o(n,{icon:"fa-home",role:"button"}),p("首頁")]),_:1})]),t("li",ut,[t("div",{class:"dropdown-title",onClick:s[0]||(s[0]=(...a)=>e.toggleStatus&&e.toggleStatus(...a)),"data-bs-toggle":"collapse","data-bs-target":"#productList","aria-expanded":"false","aria-controls":"productList"},[t("span",_t,[o(n,{class:"",icon:"fa-list",role:"button"}),p("商品列表 ")]),o(n,{class:"dropdown-arrow pe-none",icon:"fa-chevron-right"})]),t("div",pt,[t("ul",mt,[t("li",ft,[o(c,{class:"menu-link",to:"/eStore/productList"},{default:r(()=>[p("所有商品")]),_:1})]),t("li",ht,[o(c,{class:"menu-link",to:"editProduct"},{default:r(()=>[p("熱賣商品")]),_:1})]),t("li",gt,[t("div",{class:"dropdown-title",onClick:s[1]||(s[1]=(...a)=>e.toggleStatus&&e.toggleStatus(...a)),"data-bs-toggle":"collapse","data-bs-target":"#productCategory","aria-expanded":"false","aria-controls":"productCategory"},[vt,o(n,{class:"dropdown-arrow pe-none",icon:"fa-chevron-right"})]),t("div",bt,[t("ul",yt,[(d(!0),u(w,null,C(e.productCategoryList,a=>(d(),u("li",{class:"collapse-item",parentId:"productCategory",key:a},[o(c,{class:"menu-link text-underline-hover",to:"home"},{default:r(()=>[p(m(a),1)]),_:2},1024)]))),128))])])])])])])])]),_:1})])]),wt]),t("div",xt,[t("ul",It,[t("li",null,[o(c,{class:"menu-link",to:"/eStore/home"},{default:r(()=>[p("首頁")]),_:1})]),t("li",null,[o(h,{alignLeft:!0},E({header:r(()=>[Lt]),_:2},[e.productCategoryList.length>0?{name:"menu",fn:r(()=>[t("div",kt,[t("div",Ct,[t("h2",St,[o(n,{icon:"fa-list",class:"me-2"}),o(c,{to:"/eStore/productList"},{default:r(()=>[p("所有商品")]),_:1})]),t("h2",Mt,[o(n,{icon:"fa-fire",class:"me-2"}),p("熱賣商品 ")]),t("div",Nt,[t("div",At,[o(k,{show:!0,collapseId:"productCategory"},{title:r(()=>[Tt]),_:1}),t("div",Dt,[t("div",Bt,[t("div",Ft,[t("div",Vt,[(d(!0),u(w,null,C(e.productCategoryList,a=>(d(),u("div",{class:"col ps-0 py-1 text-secondary text-nowrap",key:a},[t("span",Ot,m(a),1)]))),128))])])])])])])])])]),key:"0"}:void 0]),1024)])])]),t("div",Pt,[t("div",zt,[Rt,o(n,{class:"px-3",icon:"fa-search",role:"button"})])]),t("div",Et,[o(h,null,{header:r(()=>[o(n,{class:"fs-5 ms-3 ms-md-4 text-white",icon:"fa-user",role:"button"})]),menu:r(()=>[t("div",Jt,[o(c,{to:"/eStore/home",class:"border-bottom px-2 py-1 text-end text-primary"},{default:r(()=>[p("個人資料")]),_:1}),o(c,{to:"/eStore/userOrder",class:"border-bottom px-2 py-1 text-end text-primary"},{default:r(()=>[p("訂單列表")]),_:1})])]),_:1}),o(h,null,{header:r(()=>[t("div",jt,[o(n,{class:"fs-5 ms-3 ms-md-4 text-white",icon:"fa-cart-shopping",role:"button"}),e.cartItems.length>0?(d(),u("span",qt,m(e.cartItemCount),1)):M("",!0)])]),menu:r(()=>[e.cartItems.length>0?(d(),u(w,{key:0},[t("div",Gt,[(d(!0),u(w,null,C(e.cartItems,(a,y)=>(d(),u("div",{class:"card mb-2 border-0 border-bottom rounded-0",key:a.info.id},[t("div",Ut,[t("img",{src:a.info.imageUrl,alt:a.info.title},null,8,Wt),t("div",Ht,[t("div",Kt,[t("h5",Qt,m(a.info.title),1),o(n,{onClick:ne=>e.cart.delItem(y),icon:"fa-xmark",class:"del-btn m-0 text-secondary"},null,8,["onClick"])]),t("p",Xt,m(a.info.description),1),t("p",Yt," $ "+m(a.info.price.toLocaleString())+" * "+m(a.count),1)])])]))),128))]),t("div",Zt,[t("p",$t,[p(" 總金額: "),t("span",te,"$ "+m(e.cartAmount.toLocaleString()),1)]),t("button",{type:"button",class:"btn btn-primary w-100",onClick:s[2]||(s[2]=a=>e.router.push("/eStore/cart"))}," 查看購物車 ")])],64)):(d(),u("p",ee,[p(" 目前還未將商品加入購物車 "),o(n,{class:"ms-1",icon:"fa-face-frown"})]))]),_:1})])])])]),e.route.name==="home"?(d(),u("div",oe)):M("",!0),t("div",se,[o(A)]),o(_)],64)}const fe=N(ot,[["render",ae],["__scopeId","data-v-283b40ae"]]);export{fe as default};
