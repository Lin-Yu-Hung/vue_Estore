import{c as $}from"./cart-4c9c16a7.js";import{_ as g,r as f,o as a,c,b as o,F as m,z as v,w,O as k,y as d,t as x,v as M,x as b,h as u,j as S,p as I,f as L}from"./index-8cd1bf87.js";const V={setup(i,e){const l=f(null),{emit:t}=e;return{coupon:l,applyCoupon:()=>{t("applyCoupon",l.value)}}}},A={class:"modal fade",id:"couponModal",tabindex:"-1","aria-labelledby":"couponModalLabel","aria-hidden":"true"},N={class:"modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable"},W={class:"modal-content"},B=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"couponModalLabel"},"可使用優惠券"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),U={class:"modal-body"},j=["for"],D={class:"container-fluid"},F={class:"row"},T={class:"col-2 border-end"},z={class:"d-center align-items-center h-100"},E=["id","value"],O={class:"col-8 col-md-6"},R={class:"d-column py-2"},q=o("p",{class:"text-secondary fs-small mb-2"}," 套用活動：新用戶優惠 ",-1),G={class:"text-secondary fs-small mb-2"},H=o("p",{class:"text-secondary fs-small mb-0"}," 有效期限：2024/12/31 ",-1),J=o("div",{class:"col-2 col-md border-start"},[o("div",{class:"d-center align-items-center h-100"},"8折")],-1),K={class:"modal-footer d-center"};function P(i,e,l,t,h,C){return a(),c("div",A,[o("div",N,[o("div",W,[B,o("div",U,[(a(),c(m,null,v(10,(n,r)=>o("label",{key:r,class:"card card-hover-shadow mb-3",for:`W00000000000${n}`,role:"button"},[o("div",D,[o("div",F,[o("div",T,[o("div",z,[w(o("input",{class:"form-check-input",type:"radio",name:"coupon",id:`W00000000000${n}`,value:`W00000000000${n}`,"onUpdate:modelValue":e[0]||(e[0]=s=>t.coupon=s)},null,8,E),[[k,t.coupon]])])]),o("div",O,[o("div",R,[q,o("p",G," 優惠代碼："+d(`W00000000000${n}`),1),H])]),J])])],8,j)),64))]),o("div",K,[o("button",{type:"button",class:"btn btn-primary w-50","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[1]||(e[1]=(...n)=>t.applyCoupon&&t.applyCoupon(...n))}," 套用 ")])])])])}const Q=g(V,[["render",P]]);const X={components:{CouponModal:Q},setup(i){const e=$(),l=f(""),t=f(!1);return{cart:e,changeCount:(r,s)=>e.changeItemCount(s,r.target.value),setCoupon:r=>{l.value=r,t.value=!0},selectedCoupon:l,availableCoupon:t,removeCoupon:()=>{t.value=!1,l.value=""}}}},_=i=>(I("data-v-66e96f55"),i=i(),L(),i),Y={key:0,class:"container-fluid pt-2"},Z={class:"row"},oo={class:"col-lg-7 col-xl-7"},to={class:"table-responsive"},so={class:"table table-hover"},eo=_(()=>o("thead",null,[o("tr",null,[o("th",{scope:"col",class:"text-center mobile-hide"},"商品圖片"),o("th",{scope:"col"},"商品名稱"),o("th",{scope:"col"},"數量"),o("th",{scope:"col"},"單價"),o("th",{scope:"col",class:"text-center"},"操作")])],-1)),no={scope:"row",class:"mobile-hide"},ao={class:"d-center"},co=["src","alt","title"],lo={class:"mb-0 line-clamp-2"},io={class:"d-end"},ro=["onChange"],_o=["selected"],po={class:"text-center"},uo={class:"col"},mo={class:"card p-3 shadow"},ho=_(()=>o("h2",{class:"fs-5 mb-3 border-bottom pb-2"},"訂單金額",-1)),bo={class:"d-flex align-items-center mb-3"},fo=_(()=>o("label",{for:"coupon",class:"form-label me-2 mb-0 text-nowrap"},"優惠券",-1)),vo=["disabled"],Co={class:"d-flex flex-column flex-sm-row justify-content-between"},yo={class:"mb-2 fs-6 text-decoration-underline",role:"button","data-bs-toggle":"modal","data-bs-target":"#couponModal"},xo={key:0,class:"text-end text-green mb-0",role:"button"},go={class:"d-column align-items-end mt-2"},wo={class:"d-between w-40 text-nowrap"},$o=_(()=>o("span",{class:"fs-6 mb-1 text-secondary"}," 小記 ",-1)),ko={class:"fs-6 mb-1 text-secondary"},Mo={class:"d-between w-40 text-nowrap"},So=_(()=>o("span",{class:"fs-6 mb-1 text-secondary"}," 折扣 ",-1)),Io={class:"fs-6 mb-1 text-secondary"},Lo={class:"d-end text-nowrap border-top pt-2 mt-2"},Vo=_(()=>o("span",{class:"fs-4 mb-1 me-2"}," 總金額 ",-1)),Ao={class:"fs-4 mb-1"},No=_(()=>o("button",{class:"btn btn-primary mt-2"},"立即結帳",-1)),Wo={key:1,class:"empty-text"};function Bo(i,e,l,t,h,C){const n=x("font-awesome-icon"),r=x("CouponModal");return a(),c(m,null,[t.cart.cartItems.length>0?(a(),c("div",Y,[o("div",Z,[o("div",oo,[o("div",to,[o("table",so,[eo,o("tbody",null,[(a(!0),c(m,null,v(t.cart.cartItems,(s,y)=>(a(),c("tr",{key:s},[o("th",no,[o("div",ao,[o("img",{src:s.info.imageUrl,alt:s.info.title,title:s.info.title},null,8,co)])]),o("td",null,[o("p",lo,d(s.info.title),1)]),o("td",null,[o("div",io,[o("select",{class:"form-select",onChange:p=>t.changeCount(p,y)},[(a(),c(m,null,v(30,p=>o("option",{selected:p==s.count,key:p},d(p),9,_o)),64))],40,ro)])]),o("td",null,d(s.info.price.toLocaleString()),1),o("td",po,[u(n,{role:"button",icon:"fa-trash-can",class:"text-secondary",onClick:p=>t.cart.delItem(y)},null,8,["onClick"])])]))),128))])])])]),o("div",uo,[o("div",mo,[ho,o("div",bo,[fo,w(o("input",{type:"text",class:"form-control form-control-sm",id:"coupon",placeholder:"請輸入優惠代碼","onUpdate:modelValue":e[0]||(e[0]=s=>t.selectedCoupon=s),disabled:t.availableCoupon},null,8,vo),[[M,t.selectedCoupon]])]),o("div",Co,[o("p",yo,[b(" 選用優惠券"),u(n,{class:"ms-1",icon:"fa-solid fa-arrow-right"})]),t.availableCoupon?(a(),c("p",xo,[b(d(t.selectedCoupon)+" 優惠券 ",1),o("button",{type:"button",class:"btn-close pe-0",onClick:e[1]||(e[1]=(...s)=>t.removeCoupon&&t.removeCoupon(...s))})])):S("",!0)]),o("div",go,[o("div",wo,[$o,o("span",ko," $ "+d(t.cart.cartAmount.toLocaleString()),1)]),o("div",Mo,[So,o("span",Io," $ "+d((t.cart.cartAmount*.2).toLocaleString()),1)])]),o("div",Lo,[Vo,o("span",Ao," $ "+d((t.cart.cartAmount*.8).toLocaleString()),1)]),No])])])])):(a(),c("h2",Wo,[b(" 目前還未將商品加入購物車 "),u(n,{class:"ms-2",icon:"fa-face-frown"})])),u(r,{onApplyCoupon:t.setCoupon},null,8,["onApplyCoupon"])],64)}const Do=g(X,[["render",Bo],["__scopeId","data-v-66e96f55"]]);export{Do as default};
