import{f as k}from"./api-5b11739b.js";import{_ as C,r as m,l as D,t as O,k as I,o as n,c as l,b as t,h,z as y,w as S,v as T,i as N,G as L,j as w,F as x,A as f,B as o,n as V,p as B,f as M}from"./index-8643c75a.js";import{t as z}from"./date-44c8fab1.js";import"./sweetAlert-609335ee.js";const E={setup(p){const a=m([]),g=D(),s=m(""),_=m(""),b=m({}),d=async(r=1)=>{g.showLoading();try{const c=await k(r);console.log(c),c.data.success&&(a.value=[...c.data.orders],b.value={...c.data.pagination})}catch(c){console.log(c)}finally{g.hideLoading(),_.value="fa-arrow-up-wide-short",s.value=""}};d();const e=O(()=>a.value.filter(r=>r.id.match(s.value)));return{orders:a,timestampToYMD:z,showData:e,keyWord:s,toggleIcon:()=>{const r=_.value==="fa-arrow-down-short-wide"?"up":"down";_.value=r==="up"?"fa-arrow-up-wide-short":"fa-arrow-down-short-wide",a.value=a.value.sort((c,v)=>r==="up"?v.create_at-c.create_at:c.create_at-v.create_at)},iconName:_,pagination:b,getOrders:d}}},u=p=>(B("data-v-c719fe71"),p=p(),M(),p),G={class:"card shadow my-3 p-2 p-md-3"},W={class:"d-between align-items-center mb-3"},Y={class:"fs-title mb-0"},j={class:"input-group d-center align-items-center rounded-pill border bg-white mobile-w-50 w-25",style:{"z-index":"1"}},F={class:"accordion",id:"accordionExample"},U={class:"header accordion-button border-0 px-2 px-md-3",type:"button"},q=u(()=>t("span",{class:"border-end pe-2 pe-md-4 w-25 mobile-hide",style:{"min-width":"220px"}}," 訂單編號",-1)),A={class:"border-end pe-2 pe-md-4 w-15 text-center mobile-hide-border",style:{"min-width":"120px"}},H=u(()=>t("span",{class:"border-end pe-4 ms-4 mobile-hide w-10 text-center"}," 品項",-1)),J=["data-bs-target","aria-controls"],K={class:"border-end pe-2 pe-md-4 w-25 mobile-hide",style:{"min-width":"220px"}},P={class:"border-end pe-2 pe-md-4 w-15 text-center mobile-hide-border",style:{"min-width":"120px"}},Q={class:"border-end pe-4 ms-4 mobile-hide w-10 text-center"},R=u(()=>t("span",{class:"arrow-text"}," 詳細資訊 ",-1)),X=["id"],Z={class:"accordion-body border-top"},$={class:"d-flex flex-wrap text-nowrap mb-3 order-info"},tt={class:"flex-grow-1 mb-0 ps-0 ps-md-5"},et={class:"flex-grow-1 mb-0 ps-0 ps-md-5"},st={class:"table-responsive"},ot={class:"table table-hover border"},at=u(()=>t("thead",null,[t("tr",{class:"table-light"},[t("th",{class:"text-center mobile-hide"},"商品圖片"),t("th",null,"商品名稱"),t("th",{class:"text-end"},"數量"),t("th",{class:"text-end"},"單價"),t("th")])],-1)),nt={class:"text-center mobile-hide"},lt=["src","alt","title"],it={class:"text-end"},ct={class:"text-end"},dt=u(()=>t("td",null,null,-1)),rt={key:0,class:"mt-3 d-end"},pt={class:"pagination"},_t={class:"page-item"},ut=["onClick"],mt={class:"page-link"},ht={class:"page-item"};function gt(p,a,g,s,_,b){const d=I("font-awesome-icon");return n(),l("div",G,[t("div",W,[t("h2",Y,[h(d,{icon:"fa-file-lines",role:"button",class:"text-secondary me-2 ms-1"}),y("所有訂單 ")]),t("div",j,[S(t("input",{type:"text",class:"form-control rounded-pill border-0 ps-3 fs-small",placeholder:"查詢訂單編號","onUpdate:modelValue":a[0]||(a[0]=e=>s.keyWord=e)},null,512),[[T,s.keyWord]]),h(d,{class:"px-3",icon:"fa-search",role:"button"})])]),t("div",F,[t("button",U,[q,t("span",A,[y(" 訂單日期 "),h(d,{icon:s.iconName,class:"ms-1",role:"button",id:"dateDom",onClick:a[1]||(a[1]=e=>s.toggleIcon("dateDom"))},null,8,["icon"])]),H]),h(L,{name:"list"},{default:N(()=>[(n(!0),l(x,null,f(s.showData,e=>(n(),l("div",{class:"accordion-item d-column align-items-end",key:e.id},[t("button",{class:"accordion-button px-2 px-md-3",type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${e.id}`,"aria-expanded":"true","aria-controls":`collapse${e.id}`},[t("span",K,o(e.id),1),t("span",P,o(s.timestampToYMD(e.create_at)),1),t("span",Q,o(Object.keys(e.products).length),1),R],8,J),t("div",{id:`collapse${e.id}`,class:"accordion-collapse collapse w-100","data-bs-parent":"#accordionExample"},[t("div",Z,[t("div",$,[t("ul",tt,[t("li",null,"姓名："+o(e.user.name),1),t("li",null,"電話："+o(e.user.tel),1),t("li",null,"地址："+o(e.user.address),1),t("li",null,"電子信箱："+o(e.user.email),1)]),t("ul",et,[t("li",null,"訂單編號："+o(e.id),1),t("li",null,"訂單日期："+o(s.timestampToYMD(e.create_at)),1),t("li",null,"訂單金額："+o(e.total.toLocaleString()),1),t("li",null,"備註："+o(e.message),1)])]),t("div",st,[t("table",ot,[at,t("tbody",null,[(n(!0),l(x,null,f(e.products,i=>(n(),l("tr",{key:i.id},[t("td",nt,[t("img",{style:{width:"100px",height:"100px"},src:i.product.imageUrl,alt:i.product.title,title:i.product.title},null,8,lt)]),t("td",null,o(i.product.title),1),t("td",it,o(i.qty),1),t("td",ct,o(i.product.price.toLocaleString()),1),dt]))),128))])])])])],8,X)]))),128))]),_:1}),s.pagination.total_pages&&s.pagination.total_pages>1?(n(),l("nav",rt,[t("ul",pt,[t("li",_t,[s.pagination.has_pre?(n(),l("a",{key:0,class:"page-link",onClick:a[2]||(a[2]=e=>s.getOrders(s.pagination.current_page-1))},"上一頁")):w("",!0)]),(n(!0),l(x,null,f(s.pagination.total_pages,e=>(n(),l("li",{class:V(["page-item",{active:s.pagination.current_page===e}]),key:e,onClick:i=>s.getOrders(e)},[t("a",mt,o(e),1)],10,ut))),128)),t("li",ht,[s.pagination.has_next?(n(),l("a",{key:0,class:"page-link",onClick:a[3]||(a[3]=e=>s.getOrders(s.pagination.current_page+1))},"下一頁")):w("",!0)])])])):w("",!0)])])}const vt=C(E,[["render",gt],["__scopeId","data-v-c719fe71"]]);export{vt as default};
